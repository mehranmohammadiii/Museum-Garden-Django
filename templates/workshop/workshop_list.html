{% extends "maintemplate.html" %}
{% load static %}

{% block content %}

<!-- Page Header Banner -->
<div class="page-header" style="background-image: url('{% static 'images/workshops/workshop2.jpg' %}');">
    <div class="container">
        <h1 class="page-title">کارگاه‌های آموزشی</h1>
    </div>
</div> 

<!-- Main Content Section -->
<div class="container content-section py-5">
    <div class="row">

        <!-- Start of the Loop -->
        {% for workshop in workshops %}
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100 shadow-sm workshop-card">
                <div class="card-img-container">
                    <img src="{{ workshop.image_name.url }}" class="card-img-top" alt="{{ workshop.title }}">
                    
                    <!-- Status Badge using Django's if/elif/else -->
                    <span class="badge workshop-status
                        {% if workshop.status.status_name == 'درحال برگزاری' %}
                            bg-success
                        {% elif workshop.status.status_name == 'به زودی' %}
                            bg-info
                        {% elif workshop.status.status_name == 'برگزار شده' %}
                            bg-secondary
                        {% else %}
                            bg-dark
                        {% endif %}
                    ">{{ workshop.status }}</span>
                </div>
                
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ workshop.title }}</h5>
                    <p class="card-text text-muted flex-grow-1">
                        <i class="bi bi-person-fill"></i> مدرس: {{ workshop.teacher }} <br>
                        <i class="bi bi-calendar-event"></i> تاریخ: {{ workshop.datetime_holding|date:"Y/m/d - H:i" }}
                    </p>
                    <a href="{% url "workshop:workshopdetailview" pk=workshop.id%}" class="btn btn-primary mt-auto">مشاهده جزئیات</a>
                </div>
            </div>
        </div>
        {% endfor %}
        <!-- End of the Loop -->

    </div>

    <!-- Pagination Controls (provided by ListView) -->
    {% if page_obj.has_other_pages %}
    <nav aria-label="Page navigation" class="mt-4">
        <ul class="pagination justify-content-center">
            {% if page_obj.has_previous %}
                <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">قبلی</a></li>
            {% else %}
                <li class="page-item disabled"><span class="page-link">قبلی</span></li>
            {% endif %}

            {% for i in page_obj.paginator.page_range %}
                {% if page_obj.number == i %}
                    <li class="page-item active" aria-current="page"><span class="page-link">{{ i }}</span></li>
                {% else %}
                    <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                {% endif %}
            {% endfor %}

            {% if page_obj.has_next %}
                <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">بعدی</a></li>
            {% else %}
                <li class="page-item disabled"><span class="page-link">بعدی</span></li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

</div>

{% endblock %}